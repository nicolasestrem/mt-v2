---
/**
 * Manages all SEO-related meta tags for a page.
 * This component handles the title, description, canonical URL, Open Graph tags,
 * and structured data (JSON-LD) for the website, an organization, and an event.
 *
 * @component
 * @param {object} props - The properties for the component.
 * @param {string} [props.title] - The title of the page.
 * @param {string} [props.description] - The meta description for the page.
 * @param {string} [props.image] - The URL for the Open Graph image.
 * @param {string} [props.canonical] - The canonical URL for the page.
 * @param {boolean} [props.noindex=false] - If true, adds a "noindex, nofollow" meta tag.
 * @param {object} [props.article] - If the page is an article, provide details.
 * @param {string} [props.article.publishedTime] - The ISO 8601 publication date.
 * @param {string} [props.article.modifiedTime] - The ISO 8601 modification date.
 * @param {string} [props.article.author] - The author of the article.
 *
 * @example
 * <SEO
 *   title="About Us"
 *   description="Learn more about the Mobility Trailblazers initiative."
 * />
 */
export interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonical?: string;
  noindex?: boolean;
  article?: {
    publishedTime?: string;
    modifiedTime?: string;
    author?: string;
  };
}

const {
  title = 'Mobility Trailblazers – Nominierung für 26 in 2026 | Mobilitätswende im DACH-Raum',
  description = 'Nominieren Sie Persönlichkeiten für die 26 in 2026 Mobility Trailblazers Awards. Jetzt Vorschlag für die Mobilitätswende im DACH-Raum einreichen!',
  image = '/images/og-image.jpg',
  canonical,
  noindex = false,
  article
} = Astro.props;

const siteUrl = 'https://mobilitytrailblazers.de';
const canonicalURL = canonical || new URL(Astro.url.pathname, siteUrl).toString();
const imageURL = new URL(image, siteUrl).toString();
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<link rel="canonical" href={canonicalURL} />

{noindex && <meta name="robots" content="noindex, nofollow" />}

<!-- Open Graph / LinkedIn -->
<meta property="og:type" content={article ? 'article' : 'website'} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={imageURL} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:locale" content="de_DE" />
<meta property="og:site_name" content="Mobility Trailblazers" />

{article && (
  <>
    {article.publishedTime && <meta property="article:published_time" content={article.publishedTime} />}
    {article.modifiedTime && <meta property="article:modified_time" content={article.modifiedTime} />}
    {article.author && <meta property="article:author" content={article.author} />}
  </>
)}

<!-- Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${siteUrl}/#website`,
      "url": siteUrl,
      "name": "Mobility Trailblazers",
      "alternateName": "MT Awards",
      "description": "Initiative zur Auszeichnung von 26 Vorreitern der Mobilitätswende im DACH-Raum für 2026",
      "inLanguage": "de-DE",
      "publisher": {
        "@id": `${siteUrl}/#organization`
      }
    },
    {
      "@type": "Organization",
      "@id": `${siteUrl}/#organization`,
      "name": "Mobility Trailblazers",
      "url": siteUrl,
      "logo": {
        "@type": "ImageObject",
        "url": `${siteUrl}/images/logo.webp`,
        "width": 512,
        "height": 512
      },
      "description": "Eine Initiative des Instituts für Mobilität der Universität St. Gallen zur Auszeichnung von 26 Vorreitern der Mobilitätswende für 2026.",
      "sameAs": [
        "https://www.linkedin.com/company/mobility-trailblazers"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "availableLanguage": ["German", "English"],
        "email": "info@mobilitytrailblazers.de"
      }
    },
    {
      "@type": "Event",
      "@id": `${siteUrl}/#event-2026`,
      "name": "Mobility Trailblazers Awards 2026",
      "description": "Preisverleihung der 26 wichtigsten Vorreiter der Mobilitätswende im DACH-Raum für das Jahr 2026.",
      "startDate": "2026-10-30",
      "endDate": "2026-10-30",
      "eventStatus": "https://schema.org/EventScheduled",
      "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
      "location": {
        "@type": "Place",
        "name": "Berlin",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Berlin",
          "addressRegion": "Berlin",
          "addressCountry": "DE"
        }
      },
      "organizer": {
        "@id": `${siteUrl}/#organization`
      },
      "sponsor": [
        {
          "@type": "Organization",
          "name": "Institut für Mobilität der Universität St. Gallen",
          "url": "https://imo.unisg.ch"
        },
        {
          "@type": "Organization", 
          "name": "Tomczak-Gross & Partners AG",
          "url": "https://tomczak-gross.com"
        },
        {
          "@type": "Organization",
          "name": "Handelsblatt",
          "url": "https://www.handelsblatt.com"
        }
      ],
      "offers": {
        "@type": "Offer",
        "name": "Nomination",
        "price": "0",
        "priceCurrency": "EUR",
        "availability": "https://schema.org/InStock",
        "validFrom": "2026-01-01",
        "validThrough": "2026-09-30",
        "url": `${siteUrl}/#nominierung`
      },
      "image": [
        `${siteUrl}/images/og-image.jpg`
      ]
    }
  ]
})} />
</script>