---
// LinkedIn Feed component for Mobility Trailblazers
// Uses SociableKit widget for displaying LinkedIn posts (same as production site)
// 
// SETUP INSTRUCTIONS:
// 1. Go to https://www.sociablekit.com
// 2. Click "Create a Widget" and select "LinkedIn Page Posts"
// 3. Connect your LinkedIn page (Mobility Trailblazers showcase)
// 4. Customize the widget appearance (optional)
// 5. Copy the widget ID from the embed code
// 6. Replace the ID in the iframe src below (currently using production ID: 25576730)
// 
// FREE TIER LIMITATIONS:
// - Limited to 5 posts display
// - SociableKit branding shown at bottom
// - Updates every 24 hours
// - Basic customization options
// 
// NOTE: The widget ID 25576730 is from the production site.
// To use your own feed, create a new widget and replace this ID.
import Icons from './Icons.astro';
---

<section class="linkedin-feed">
	<!-- Subtle zigzag divider at top -->
	<div class="section-divider-top">
		<svg viewBox="0 0 1200 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
			<path d="M0,30 L200,60 L400,30 L600,60 L800,30 L1000,60 L1200,30 L1200,0 L0,0 Z" fill="#003C3D"></path>
		</svg>
	</div>
	<div class="container">
		<div class="feed-header">
			<h2 class="feed-title" style="color: #004C5F;">Aktuelles von LinkedIn</h2>
			<p class="feed-subtitle">
				Folgen Sie unseren neuesten Updates und Diskussionen zur Mobilitätswende
			</p>
		</div>
		
		<!-- SociableKit LinkedIn Feed Widget with Cookie Consent -->
		<div class="linkedin-widget-container" id="linkedin-feed-container">
			<!-- Placeholder for tarteaucitron consent -->
			<div class="sociablekit-placeholder"
				 data-frame="https://widgets.sociablekit.com/linkedin-page-posts/iframe/25576730"
				 data-width="100%"
				 data-height="1800">
				<div class="consent-placeholder">
					<div class="consent-icon">
						<svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" fill="#0077B5"/>
							<path d="M8 10V16M8 10C8 9.44772 7.55228 9 7 9C6.44772 9 6 9.44772 6 10C6 10.5523 6.44772 11 7 11C7.55228 11 8 10.5523 8 10ZM11 16V11M11 11C11 10.4477 11.4477 10 12 10C12.8284 10 13.5 10.6716 13.5 11.5V16M16.5 16V13.5C16.5 12.6716 17.1716 12 18 12C18.5523 12 19 12.4477 19 13V16" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</div>
					<h3>LinkedIn Feed</h3>
					<p>Um unseren LinkedIn-Feed anzuzeigen, müssen Sie der Verwendung von Cookies durch SociableKit zustimmen.</p>
					<p class="consent-info">SociableKit ermöglicht es uns, unsere LinkedIn-Beiträge direkt auf dieser Website anzuzeigen. Dabei werden Daten an SociableKit übertragen.</p>
					<button class="consent-button" onclick="tarteaucitron.userInterface.respond(tarteaucitron.services.sociablekit, true);">
						LinkedIn Feed aktivieren
					</button>
					<a href="/datenschutz" class="privacy-link">Mehr Informationen in unserer Datenschutzerklärung</a>
				</div>
			</div>
		</div>

		<!-- Follow CTA -->
		<div class="linkedin-follow-cta">
			<a href="https://www.linkedin.com/showcase/mobility-trailblazers/" 
			   target="_blank" 
			   rel="noopener noreferrer" 
			   class="linkedin-button">
				<Icons name="linkedin" class="linkedin-icon" />
				<span>Folgen Sie uns auf LinkedIn</span>
			</a>
			<p class="linkedin-hashtag">#MobilityTrailblazers #Mobilitätswende</p>
		</div>
	</div>
</section>

<style>
	.linkedin-feed {
		background: linear-gradient(135deg, #f8f0e3 0%, #fff 100%);
		padding: 3rem 0;
		position: relative;
	}

	.section-divider-top {
		position: absolute;
		top: -1px;
		left: 50%;
		transform: translateX(-50%);
		width: 100%;
		max-width: none;
		overflow: hidden;
		line-height: 0;
	}

	.section-divider-top svg {
		position: relative;
		display: block;
		width: 100%;
		height: 35px;
	}

	@media (min-width: 768px) {
		.section-divider-top svg {
			height: 45px;
		}
	}

	.feed-header {
		text-align: center;
		margin-bottom: 2.5rem;
	}

	.feed-title {
		font-size: 2.5rem;
		font-weight: 700;
		color: #003c3d;
		margin-bottom: 1rem;
		font-family: 'Trebuchet MS', sans-serif;
	}

	.feed-subtitle {
		font-size: 1.125rem;
		color: #666;
		max-width: 600px;
		margin: 0 auto;
	}

	.linkedin-widget-container {
		max-width: 1200px;
		margin: 0 auto 3rem;
		background: white;
		border-radius: 20px;
		padding: 2rem;
		box-shadow: 0 10px 40px rgba(0, 60, 61, 0.1);
	}

	.linkedin-iframe {
		border-radius: 12px;
		min-height: 600px;
	}

	.consent-placeholder {
		text-align: center;
		padding: 4rem 2rem;
		min-height: 400px;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
		border-radius: 12px;
	}

	.consent-icon {
		margin-bottom: 1.5rem;
		animation: pulse 2s infinite;
	}

	@keyframes pulse {
		0% { transform: scale(1); }
		50% { transform: scale(1.05); }
		100% { transform: scale(1); }
	}

	.consent-placeholder h3 {
		font-size: 1.8rem;
		color: #003c3d;
		margin-bottom: 1rem;
		font-family: 'Trebuchet MS', sans-serif;
	}

	.consent-placeholder p {
		font-size: 1.1rem;
		color: #666;
		max-width: 500px;
		margin-bottom: 1rem;
		line-height: 1.6;
	}

	.consent-info {
		font-size: 0.95rem;
		color: #888;
		margin-bottom: 2rem;
	}

	.consent-button {
		display: inline-block;
		padding: 1rem 2.5rem;
		background: linear-gradient(135deg, #0077b5, #0a66c2);
		color: white;
		font-size: 1.1rem;
		font-weight: 600;
		text-decoration: none;
		border-radius: 50px;
		transition: all 0.3s ease;
		box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
		border: none;
		cursor: pointer;
		margin-bottom: 1.5rem;
	}

	.consent-button:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 25px rgba(0, 119, 181, 0.4);
		background: linear-gradient(135deg, #0a66c2, #0077b5);
	}

	.privacy-link {
		font-size: 0.9rem;
		color: #0077b5;
		text-decoration: underline;
		transition: color 0.3s ease;
	}

	.privacy-link:hover {
		color: #0a66c2;
	}

	.linkedin-follow-cta {
		text-align: center;
		padding: 2rem;
	}

	.linkedin-button {
		display: inline-flex;
		align-items: center;
		gap: 0.75rem;
		padding: 1rem 2.5rem;
		background: linear-gradient(135deg, #0077b5, #0a66c2);
		color: white;
		font-size: 1.1rem;
		font-weight: 600;
		text-decoration: none;
		border-radius: 50px;
		transition: all 0.3s ease;
		box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
	}

	.linkedin-button:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 25px rgba(0, 119, 181, 0.4);
		background: linear-gradient(135deg, #0a66c2, #0077b5);
	}

	.linkedin-button :global(.linkedin-icon) {
		width: 1.3rem;
		height: 1.3rem;
		display: inline-block;
		vertical-align: middle;
	}

	.linkedin-hashtag {
		margin-top: 1.5rem;
		font-size: 0.95rem;
		color: #0077b5;
		font-weight: 500;
	}

	@media (max-width: 768px) {
		.feed-title {
			font-size: 2rem;
		}

		.linkedin-widget-container {
			padding: 1rem;
		}

		.linkedin-iframe {
			height: 1200px;
		}

		.linkedin-button {
			padding: 0.9rem 2rem;
			font-size: 1rem;
		}
	}
</style>

<script is:inline>
	// Initialize SociableKit service with tarteaucitron
	document.addEventListener('DOMContentLoaded', function() {
		if (typeof tarteaucitron !== 'undefined') {
			(tarteaucitron.job = tarteaucitron.job || []).push('sociablekit');
		}
	});
</script>

