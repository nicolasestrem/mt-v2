---
// LinkedIn Feed component for Mobility Trailblazers
// Uses SociableKit widget for displaying LinkedIn posts (same as production site)
// 
// SECURITY WARNING: Currently using production widget ID (25576730) from another site
// TODO: Create dedicated widget for this site to avoid potential data leakage
// 
// SETUP INSTRUCTIONS:
// 1. Go to https://www.sociablekit.com
// 2. Click "Create a Widget" and select "LinkedIn Page Posts"
// 3. Connect your LinkedIn page (Mobility Trailblazers showcase)
// 4. Customize the widget appearance (optional)
// 5. Copy the widget ID from the embed code
// 6. Replace the ID in the iframe src below (currently using production ID: 25576730)
// 
// FREE TIER LIMITATIONS:
// - Limited to 5 posts display
// - SociableKit branding shown at bottom
// - Updates every 24 hours
// - Basic customization options
// 
// NOTE: The widget ID 25576730 is from the production site.
// RECOMMENDATION: Create a dedicated widget or implement direct LinkedIn API integration
import Icons from './Icons.astro';
---

<section class="linkedin-feed">
	<!-- Subtle zigzag divider at top -->
	<div class="section-divider-top">
		<svg viewBox="0 0 1200 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
			<path d="M0,30 L200,60 L400,30 L600,60 L800,30 L1000,60 L1200,30 L1200,0 L0,0 Z" fill="#003C3D"></path>
		</svg>
	</div>
	<div class="container">
		<div class="feed-header">
			<h2 class="feed-title" style="color: #004C5F;">Aktuelles von LinkedIn</h2>
			<p class="feed-subtitle">
				Folgen Sie unseren neuesten Updates und Diskussionen zur Mobilitätswende
			</p>
		</div>
		
		<!-- SociableKit LinkedIn Feed Widget (No consent required) -->
		<div class="linkedin-widget-container" id="linkedin-feed-container">
			<!-- Direct iframe loading without consent requirement -->
			<iframe 
				src="https://widgets.sociablekit.com/linkedin-page-posts/iframe/25576730" 
				class="linkedin-iframe"
				loading="lazy"
				title="LinkedIn Feed"
				style="border: 0; border-radius: 12px;">
			</iframe>
			<noscript>
				<p style="text-align: center; padding: 2rem;">
					JavaScript ist erforderlich, um den LinkedIn-Feed anzuzeigen.<br>
					<a href="https://www.linkedin.com/showcase/mobility-trailblazers/" target="_blank" style="color: #0077b5;">
						Besuchen Sie uns auf LinkedIn →
					</a>
				</p>
			</noscript>
		</div>
		

		<!-- Follow CTA -->
		<div class="linkedin-follow-cta">
			<a href="https://www.linkedin.com/showcase/mobility-trailblazers/" 
			   target="_blank" 
			   rel="noopener noreferrer" 
			   class="linkedin-button">
				<Icons name="linkedin" class="linkedin-icon" />
				<span>Folgen Sie uns auf LinkedIn</span>
			</a>
			<p class="linkedin-hashtag">#MobilityTrailblazers #Mobilitätswende</p>
		</div>
	</div>
</section>

<style>
	.linkedin-feed {
		background: linear-gradient(135deg, #f8f0e3 0%, #fff 100%);
		padding: 3rem 0;
		position: relative;
	}

	.section-divider-top {
		position: absolute;
		top: -1px;
		left: 50%;
		transform: translateX(-50%);
		width: 100%;
		max-width: none;
		overflow: hidden;
		line-height: 0;
	}

	.section-divider-top svg {
		position: relative;
		display: block;
		width: 100%;
		height: 35px;
	}

	@media (min-width: 768px) {
		.section-divider-top svg {
			height: 45px;
		}
	}

	.feed-header {
		text-align: center;
		margin-bottom: 2.5rem;
	}

	.feed-title {
		font-size: 2.5rem;
		font-weight: 700;
		color: #003c3d;
		margin-bottom: 1rem;
		font-family: 'Trebuchet MS', sans-serif;
	}

	.feed-subtitle {
		font-size: 1.125rem;
		color: #666;
		max-width: 600px;
		margin: 0 auto;
	}

	.linkedin-widget-container {
		max-width: 1200px;
		margin: 0 auto 3rem;
		background: #fff;
		border-radius: 20px;
		padding: 2rem;
		box-shadow: 0 10px 40px rgb(0, 60, 61, 0.1);
	}

	.linkedin-iframe {
		border-radius: 12px;
		min-height: 600px;
		width: 100%;
		height: 1800px;
		border: 0;
	}
	
	.linkedin-feed-placeholder {
		min-height: 600px;
		display: flex;
		align-items: center;
		justify-content: center;
		background: #f5f5f5;
		border-radius: 12px;
		padding: 2rem;
		text-align: center;
	}

	.linkedin-follow-cta {
		text-align: center;
		padding: 2rem;
	}

	.linkedin-button {
		display: inline-flex;
		align-items: center;
		gap: 0.75rem;
		padding: 1rem 2.5rem;
		background: linear-gradient(135deg, #0077b5, #0a66c2);
		color: #fff;
		font-size: 1.1rem;
		font-weight: 600;
		text-decoration: none;
		border-radius: 50px;
		transition: all 0.3s ease;
		box-shadow: 0 4px 15px rgb(0, 119, 181, 0.3);
	}

	.linkedin-button:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 25px rgb(0, 119, 181, 0.4);
		background: linear-gradient(135deg, #0a66c2, #0077b5);
	}

	.linkedin-button :global(.linkedin-icon) {
		width: 1.3rem;
		height: 1.3rem;
		display: inline-block;
		vertical-align: middle;
	}

	.linkedin-hashtag {
		margin-top: 1.5rem;
		font-size: 0.95rem;
		color: #0077b5;
		font-weight: 500;
	}

	@media (max-width: 768px) {
		.feed-title {
			font-size: 2rem;
		}

		.linkedin-widget-container {
			padding: 1rem;
		}

		.linkedin-iframe {
			height: 1200px;
		}

		.linkedin-button {
			padding: 0.9rem 2rem;
			font-size: 1rem;
		}
	}
</style>

